<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<!-- Required meta tags -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Bootstrap CSS -->
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1"
	crossorigin="anonymous">

<!-- jquery.js CDN -->
<script src="http://code.jquery.com/jquery.js"></script>
<!-- underscore.js CDN -->
<script
	src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.12.0/underscore-min.js"
	integrity="sha512-BDXGXSvYeLxaldQeYJZVWXJmkisgMlECofWFXKpWwXnfcp/R708nrs/BtNLH5cb/5TE7aeYRTDBRXu6kRL4VeQ=="
	crossorigin="anonymous"></script>

<script id="list_template" type="text/template">
<table class="table table-striped table-hover">
   <tr>
      <th class=numth>No</th>
      <th class=nameth>Name</th>
      <th>Review</th>
      <th>writer</th>
   </tr>
   <%
   for(var i=0; i<mem_list.length; i++) { 
      var member = mem_list[i];
   %>
   <tr>
      <td class=numth><%= i %></td>	
      <td class=nameth><%=member.name %></td>
      <td><%=member.email %></td>
      <td><%=member.date %></td>
   </tr>
   <%
   } // end of for
   %>
</table>
</script>

<script type="text/javascript">
	// 자바스크립트 배열(list)
	var mem_list = [ {
		no : "1001",
		name : "맥도날드",
		email : "요즘은 맥도날드가 좀 많이 안좋은듯?",
		date : "아이유"
	}, {
		no : "1002",
		name : "장군갈비",
		email : "갈비 맛있는데 비싸서 잘못감",
		date : "김종국"
	}, {
		no : "1003",
		name : "신촌옥면",
		email : "면 좋아하시는분들 강추 ㅎㅎ 일주일에한번씩감",
		date : "김세정"
	} ];
	// jQuery 진입점

	var today = new Date();

	var year = today.getFullYear(); // 년도
	var month = today.getMonth() + 1; // 월
	var date = today.getDate(); // 날짜
	var day = today.getDay(); // 요일

	$(function() {
		function parseMemberList() {
			var compiled = _.template($("#list_template").html());
			var resultTxt = compiled({
				"mem_list" : mem_list
			});
			$("#list_result_area").html(resultTxt); // innerHTML = 
		}
		// 함수 호출
		parseMemberList();

		$('#saveBtn').click(function() {
			if(document.querySelector('.init').value==""){
				alert('내용을 입력해주세요');	
			}else {
				var obj = {
						no : $('#no').val(),
						name : $('#name').val(),
						email : $('#email').val(),
						date : $('#date').val()
					};
					//생성된 객체를 Arrays에 저장하기
					mem_list.push(obj);

					console.log(mem_list);
					// 함수 호출
					parseMemberList();
					 $('#no').val(""),
					 $('#name').val(""),
					 $('#email').val(""),
					 $('#date').val("")	
			}
			
		});
	});
</script>
<style>
#changebtn{
align:right;
}
p {
	color: lightgray;
}

body {
	width: 1300px;
	padding: 100px;
	background-color:rgb(238, 242, 242);
}
.nameth{
width : 130px;
}
.numth{
width:40px;
}
</style>
</head>
<body data-mode="day">
<input type="image" src="nightbtn.png"  id="changebtn" align="right" onclick="
	if(document.querySelector('body').dataset.mode ==='day'){
		document.querySelector('body').style.backgroundColor = 'gray';
		document.querySelector('body').style.color = 'white';	
		document.querySelector('table').style.color = 'white';	
		document.querySelector('body').dataset.mode = 'night'
		this.src = 'daybtn.png'
	}else{
		document.querySelector('body').style.backgroundColor = 'rgb(238,242,242)';
		document.querySelector('body').style.color = 'black';	
		document.querySelector('table').style.color = 'black';	
		document.querySelector('body').dataset.mode = 'day'
		this.src = 'nightbtn.png'	
	}
">
	<table>
		<hr>

		<h1>My Restaurant List</h1>
		<p>기억에 남은 식당을 기록하는 곳.</p>
		<br>
		<br>
		<br>
		<div id="list_result_area">
			<!-- template 결과가 들어오는 영역 -->
		</div>
		<tr>
			<td>name</td>
			<td><input type="text" id="name" value="식당" class="init"/></td>
		</tr>
		<tr>
			<td>review</td>
			<td><input type="text" id="email" value="내용" class="init"/></td>
		</tr>
		<tr>
			<td>writer</td>
			<td><input type="text" id="date" value="작성자" class="init"/></td>
		</tr>
		<tr>
			<td align="right" colspan="2">
				<button class= "btn btn-primary" type="reset" value="Reset" id="saveBtn" >submit</button>
			</td>
		</tr>
	</table>
	<script>

	</script>


</body>
</html>